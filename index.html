<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Test Website</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
    background: linear-gradient(135deg, #d7e8ff, #daf5d7);
    color: #0b3f34;
  }
  h2 {
    color: #074d7d;
    text-align: center;
  }
  .tabContainer {
    max-width: 480px;
    margin: 0 auto 30px auto;
    background: rgba(255 255 255 / 0.85);
    border-radius: 12px;
    box-shadow: 0 4px 12px rgb(0 0 0 / 0.1);
    padding: 15px 20px;
  }
  .tabs {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 15px;
  }
  .tabBtn {
    padding: 10px 25px;
    border: none;
    border-radius: 12px;
    font-weight: bold;
    cursor: pointer;
    background: #7a4acd;
    color: white;
    transition: background-color 0.3s ease;
  }
  .tabBtn.active {
    background: #3a6c33;
  }
  .tabContent {
    display: block;
    position: absolute;
    left: -9999px;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  .tabContent.active {
    position: static;
    left: auto;
    visibility: visible;
    opacity: 1;
  }
  #uploadUI {
    background-color: rgba(255, 255, 255, 0.8);
    border-radius: 12px;
    padding: 20px;
  }
  input[type="file"] {
    display: block;
    margin: 20px auto 10px auto;
    padding: 10px;
    width: 80%;
    background-color: #3a6c33;
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
  }
  #fileName {
    text-align: center;
    font-style: italic;
    margin-bottom: 14px;
    color: #3a6c33;
    user-select: none;
  }
  #viewWebBtn {
    display: block;
    background-color: #7a4acd;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 10px 20px;
    font-weight: bold;
    margin: 0 auto;
    cursor: pointer;
    font-size: 16px;
    max-width: 120px;
  }
  #previewPage {
    display: none;
    position: relative;
    max-width: 100vw;
    max-height: 92vh;
    margin: 0 auto;
    box-shadow: 0 0 24px rgba(0,0,0,0.15);
    border-radius: 8px;
  }
  #previewFrame {
    width: 100vw;
    height: 90vh;
    border: none;
    border-radius: 8px;
  }
  #closePreviewBtn {
    position: fixed;
    top: 18px;
    right: 20px;
    z-index: 10;
    background-color: #3a6c33;
    color: white;
    border: none;
    border-radius: 10px;
    padding: 8px 18px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 0 12px rgba(58, 108, 51, 0.7);
    user-select: none;
  }
  #codeInputArea {
    width: 100%;
    height: 250px;
    font-family: monospace;
    font-size: 14px;
    border-radius: 8px;
    border: 1px solid #ccc;
    padding: 10px;
    resize: vertical;
    box-sizing: border-box;
  }

  #fileNameInput {
    width: 310px; /* tƒÉng r·ªông h∆°n */
    margin-top: 10px;
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 16px;
    box-sizing: border-box;
    display: inline-block;
    vertical-align: middle;
  }

  #createFileBtn, #viewCodeWebBtn {
    margin-top: 15px;
    padding: 10px 15px;
    font-weight: bold;
    font-size: 16px;
    cursor: pointer;
    border-radius: 8px;
    border: none;
    display: inline-block;
    vertical-align: middle;
  }
  #createFileBtn {
    background-color: #3a6c33;
    color: white;
    max-width: 120px;
    margin-right: 10px;
  }
  #viewCodeWebBtn {
    background-color: #7a4acd;
    color: white;
    max-width: 120px;
  }
</style>
</head>
<body>

<h2>üìñ Test Website</h2>

<div class="tabContainer">
  <div class="tabs">
    <button class="tabBtn active" data-tab="inputTab">Nh·∫≠p d·ªØ li·ªáu</button>
    <button class="tabBtn" data-tab="uploadTab">Tab Input File</button>
  </div>

  <div id="inputTab" class="tabContent active">
    <textarea id="codeInputArea" placeholder="Nh·∫≠p code HTML t·∫°i ƒë√¢y..."></textarea>
    <br />
    <button id="createFileBtn">T·∫°o file</button>
    <input type="text" id="fileNameInput" placeholder="T√™n file (v√≠ d·ª•: index.html)" />
    <button id="viewCodeWebBtn">Xem web</button>
  </div>

  <div id="uploadTab" class="tabContent">
    <div id="uploadUI">
      <input type="file" id="fileInput" accept=".html,.htm" />
      <div id="fileName">Ch∆∞a ch·ªçn file</div>
      <button id="viewWebBtn" disabled>Xem Web</button>
    </div>
  </div>
</div>

<div id="previewPage">
  <button id="closePreviewBtn">ƒê√≥ng</button>
  <iframe id="previewFrame" sandbox="allow-same-origin allow-scripts"></iframe>
</div>

<script>
  // Tab chuy·ªÉn ƒë·ªïi logic
  const tabButtons = document.querySelectorAll('.tabBtn');
  const tabContents = document.querySelectorAll('.tabContent');
  tabButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      tabButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      const tabId = btn.getAttribute('data-tab');
      tabContents.forEach(tc => {
        tc.classList.toggle('active', tc.id === tabId);
      });
    });
  });

  // Upload tab logic
  const fileInput = document.getElementById('fileInput');
  const fileNameDisplay = document.getElementById('fileName');
  const viewWebBtn = document.getElementById('viewWebBtn');
  const uploadUI = document.getElementById('uploadUI');
  const previewPage = document.getElementById('previewPage');
  const previewFrame = document.getElementById('previewFrame');
  const closePreviewBtn = document.getElementById('closePreviewBtn');

  let fileContent = "";

  fileInput.addEventListener('change', () => {
    const file = fileInput.files[0];
    if (file) {
      fileNameDisplay.textContent = `File ƒë√£ ch·ªçn: ${file.name}`;
      viewWebBtn.disabled = false;
      const reader = new FileReader();
      reader.onload = e => {
        fileContent = e.target.result;
      };
      reader.readAsText(file);
    } else {
      fileNameDisplay.textContent = "Ch∆∞a ch·ªçn file";
      viewWebBtn.disabled = true;
      fileContent = "";
    }
  });

  viewWebBtn.addEventListener('click', () => {
    previewFrame.srcdoc = fileContent;
    uploadUI.style.display = 'none';
    document.getElementById('inputTab').style.visibility = 'hidden';
    document.getElementById('inputTab').style.position = 'absolute';
    previewPage.style.display = 'block';
    // Cu·ªôn ƒë·∫øn gi·ªØa iframe
    setTimeout(() => {
      previewPage.scrollIntoView({behavior: 'smooth', block: 'center'});
    }, 100);
  });

  closePreviewBtn.addEventListener('click', () => {
    previewFrame.srcdoc = '';
    uploadUI.style.display = 'block';
    const inputTabEl = document.getElementById('inputTab');
    inputTabEl.style.visibility = 'visible';
    inputTabEl.style.position = 'static';
    previewPage.style.display = 'none';
    fileInput.value = "";
    fileNameDisplay.textContent = "Ch∆∞a ch·ªçn file";
    viewWebBtn.disabled = true;
  });

  // Nh·∫≠p d·ªØ li·ªáu tab logic
  const codeInputArea = document.getElementById('codeInputArea');
  const fileNameInput = document.getElementById('fileNameInput');
  const createFileBtn = document.getElementById('createFileBtn');
  const viewCodeWebBtn = document.getElementById('viewCodeWebBtn');
  const inputTab = document.getElementById('inputTab');

  createFileBtn.addEventListener('click', () => {
    const code = codeInputArea.value.trim();
    let fileName = fileNameInput.value.trim();

    if (!code) {
      alert('Vui l√≤ng nh·∫≠p code HTML!');
      return;
    }
    if (!fileName) {
      alert('Vui l√≤ng nh·∫≠p t√™n file!');
      return;
    }
    if (!fileName.toLowerCase().endsWith('.html')) {
      fileName += '.html';
    }

    const blob = new Blob([code], {type: 'text/html'});
    const url = URL.createObjectURL(blob);

    const a = document.createElement('a');
    a.href = url;
    a.download = fileName;
    a.click();

    URL.revokeObjectURL(url);
  });

  viewCodeWebBtn.addEventListener('click', () => {
    const code = codeInputArea.value.trim();
    if (!code) {
      alert('Vui l√≤ng nh·∫≠p code HTML!');
      return;
    }
    previewFrame.srcdoc = code;
    uploadUI.style.display = 'none';
    inputTab.style.visibility = 'hidden';
    inputTab.style.position = 'absolute';
    previewPage.style.display = 'block';

    setTimeout(() => {
      previewPage.scrollIntoView({behavior: 'smooth', block: 'center'});
    }, 100);
  });
</script>

</body>
</html>
